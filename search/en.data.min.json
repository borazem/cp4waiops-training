[{"id":0,"href":"/cp4waiops-training/introduction/","title":"Introduction","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Introduction "},{"id":1,"href":"/cp4waiops-training/introduction/intro_00/","title":"Introduction","parent":"Introduction","content":" Introduction In this Training you will learn how to install IBM CloudPak for AIOps and how to configure some basic functionalities. The idea is to provide you with an optimised way to learn how to do a basic setup of CP4WAIOPS.\nYou will learn about the following topics: Installing AIManager from scratch Integrate AIManager with OpenLDAP for user management Integrate AIManager with ELK for Log Anomalies Define and train AI Models for Log Anomaly Detectiom Metric Anomaly Detection Event Grouping Similar Incidents Change Risk Create Policies for Story creation and Runbook assignment Integrate AIManager with Ansible Tower and create Runbooks in AIManager Create a RobotShop Application Topology Integrate AIManager with Slack (optional) Integrate AIManager with Service Now (optional) and those are the Topics that you are going to work on during this Training: Prerequisites In this chapter you will provision your OpenShift Cluster for the training. The Operator In this chapter you will prepare your Cluster for the installation of AIManager\nPrepare your PC or Mac to run commands against your cluster Create the Namespace Create the IBM Operator Catalog Install the CP4WAIOPS Operator The AIManager IIn this chapter you will install AIManager into your Cluster. Training Resources In this chapter you will install resources that you will need for the configuration of AIManager in the next chapter.\nThose are assets that typically already exist at a customer:\nOpenLDAP AWX (Open Source Ansible Tower) with preloaded Playbooks RobotShop Demo App Demo Service Account This will also load Training Data for:\nLog Anomalies\nYou will integrate with your live ELK instance but you probably don\u0026rsquo;t have 2-3 days to wait for ELK to collect enough logs. So we\u0026rsquo;ll train on this pre-canned Log Data.\nMetric Anomalies\nFor this training we won\u0026rsquo;t have a Metric provider (Instana, \u0026hellip;) so we\u0026rsquo;ll train on pre-canned Metric Data. If you want you can always integrate an existing Metric Source on top of the provided training data.\nService Now - Similar Incidents\nFor this training we won\u0026rsquo;t have a Service Now Instance so we\u0026rsquo;ll train on pre-canned SNOW Data. If you want you can always integrate an existing SNOW instance on top of the provided training data. You can find documentation here Configuration In this chapter you will:\nIntegrate AIManager with OpenLDAP for user management Integrate AIManager with ELK for Log Anomalies Create Policies for Story creation and Runbook assignment Integrate AIManager with Ansible Tower and create Runbooks in AIManager Create a RobotShop Application Topology Training In this chapter you will:\nDefine and train AI Models for Log Anomaly Detectiom Metric Anomaly Detection Event Grouping Similar Incidents Change Risk Test And Demo In this chapter you will verify that your environment if working properly by simulating a test incident. Slack In this chapter you will integrate AIManager with Slack "},{"id":2,"href":"/cp4waiops-training/introduction/intro_01/","title":"Course Nomenclature","parent":"Introduction","content":" Example course page Navigation You can advance with the blue Next Button on the top right/bottom right.\nCourse Elements You will find the following elements in the course:\nüì• Step Step: Task This is an example Step This is a step that you have to perform to advance in the course.\nThis is not part of the actual installation of AIManager and the commands are not hidden. So you just have to follow the instructions of the Task.\nüì• Task Task: Example Task Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=manager-starter-installation-cli This is an example Task This is a task that you have to perform to advance in the course.\nYou should use the Link to the Documentation to try to figure out how to complete the step.\nIf you get stuck or want to progress your installation rapidly you can click on the Solution and follow the outlined steps.\nüì• Solution to the current task This gives you a step-by-step solution to the Task at hand.\nüí° Click on the Solution below to test it and see more details.\nSolution This is an example command that you have to copy and execute in your terminal and that will create a Kubernetes Object\ncat \u003c\u003c EOF | oc apply -f - apiVersion: operators.coreos.com/v1alpha1 kind: MyKind metadata: name: ibm-operator-catalog namespace: openshift-marketplace spec: displayName: ibm-operator-catalog publisher: IBM Content sourceType: grpc image: icr.io/cpopen/ibm-operator-catalog:latest EOF This is an example command that you have to copy and execute in your terminal and that will execute Shell commands\noc create secret docker-registry ibm-entitlement-key \\ --docker-username=cp\\ --docker-password=_entitlement-key_ \\ --docker-server=cp.icr.io \\ --namespace=cp4waiops This is a Note or Remark\nYou can use the copy button at the top right (when you hover over the code) of the code block to easily copy the whole block.\nüì• Additional Information and Warnings Example\n‚ùó Example Remark "},{"id":3,"href":"/cp4waiops-training/introduction/intro_02/","title":"Basic Architecture","parent":"Introduction","content":" Basic Architecture The environement (Kubernetes, Applications, \u0026hellip;) create logs that are being fed into a Log Management Tool (ELK in this case).\nExternal Systems generate Alerts and send them into the AIManager for Event Grouping. At the same time AIManager ingests the raw logs coming from the Log Management Tool (ELK) and looks for anomalies in the stream based on the trained model. It also ingests Metric Data and looks for anomalies If it finds an anomaly (logs and/or metrics) it forwards it to the Event Grouping as well. Out of this, AIManager creates a Story that is being enriched with Topology (Localization and Blast Radius) and with Similar Incidents that might help correct the problem. The Story is then sent to Slack. A Runbook is available to correct the problem but not launched automatically. "},{"id":4,"href":"/cp4waiops-training/introduction/intro_03/","title":"Training Architecture","parent":"Introduction","content":" Optimized Training Architecture For the this specific Demo environment:\nELK is installed for you to kearn how to integrate it For Log Anomaly simulation we\u0026rsquo;ll beusing pre-canned logs for the anomaly detection (inception) For Metrics, we\u0026rsquo;ll be using pre-canned metric data for training and for the anomaly detection (inception) The Events will be created from pre-canned content that is injected into AIManager There are also pre-canned ServiceNow Incidents as we don‚Äôt do the live integration with SNOW for this training The Webpages that are reachable from the Events are static and hosted on my GitHub The same goes for ServiceNow Incident pages if you don‚Äôt integrate with live SNOW "},{"id":5,"href":"/cp4waiops-training/prerequisites/","title":"Prerequisites","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Prerequisites "},{"id":6,"href":"/cp4waiops-training/prerequisites/prereq_00/","title":"Prerequisites","parent":"Prerequisites","content":" Get your ROKS Cluster (IBMers and IBM Partners only) In this chapter you will provision your cluster for the training.\n"},{"id":7,"href":"/cp4waiops-training/prerequisites/prereq_01/","title":"Get your Cluster","parent":"Prerequisites","content":" Get your ROKS Cluster (IBMers and IBM Partners only) Step: Reserve a ROKS Cluster Reserve a ROKS Cluster\nIBMers and IBM Business Partners can get a temporary Cluster from Techzone (ususally valid for up to 8 days)\nCreate a cluster for Practice/Self Education if you don\u0026rsquo;t have an Opportunity Number\nSelect the maximum end date that fits your needs (you can extend the duration once after creation)\nFill-in the remaining fields\nGeograpy: prefer Dallas or London (others might be slower) Worker node count: 5 Flavour: b3c.16x64 ‚ùó OpenShift Version: 4.10 Click Submit\nOnce the cluster is provisioned, don\u0026rsquo;t forget to extend it to 8 days if needed.\n"},{"id":8,"href":"/cp4waiops-training/prerequisites/prereq_02/","title":"Important remarks","parent":"Prerequisites","content":" ‚ö†Ô∏è‚ö†Ô∏è Important remarks before you start ‚ö†Ô∏è‚ö†Ô∏è Those are remarks regarding feedback and problem reports I got from the field.\nThose scripts have been tested thoroughly on different environments and have proven to be VERY reliable.\nIf you think that you hit a problem:\nMake sure that you have provisioned a cluster with 5 worker nodes with 16 CPU and 64 GB each (b3c.16x64 - it\u0026rsquo;s easy to select the wrong size). If you have Pods in 0/0 state verify the Events. If you get Not enough CPU then delete the cluster and provision the correct size. When deploying ROKS I usually use Dallas or London, they are the fastest. On other regions we have seen much worse performance - deployment can take 4-5 times longer. If you see Pods in CrashLoop or other error states, try to wait it out (this can be due to dependencies on other componenets that are not ready yet). Chances are that the deployment will eventually go through. If after 8h you are still stuck, ping me. Simply put:\n‚ùó Be patient and make sure you have the correct size of cluster provisioned! You are now done with the chapter on Prerequisites\nPlease continue to the next chapter to learn how to iinstall the Operator. "},{"id":9,"href":"/cp4waiops-training/installing-operator/","title":"Installing the Operator","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Introduction "},{"id":10,"href":"/cp4waiops-training/installing-operator/install_operator_00/","title":"Installing the Operator","parent":"Installing the Operator","content":" Installing the Operator In this chapter you will prepare your Cluster for the installation of AIManager\nPrepare your PC or Mac to run commands against your cluster Create the basic resources (Namespace) Create the IBM Operator Catalog Install the CP4WAIOPS Operator "},{"id":11,"href":"/cp4waiops-training/installing-operator/install_operator_01/","title":"Preparing to run commands","parent":"Installing the Operator","content":" Preparing to run commands in your Terminal Task: Connect to your OpenShift Cluster Connect the terminal to your ROKS Openshift Cluster with the OpenShift Web Console. Solution Open your Openshift Web Console\nSelect Copy Login Command\nCopy the oc login .. string\nOpen your terminal\nPaste the oc login .. command from above\nClone the GitHub Repository into your directory of choice\ngit clone https://github.com/niklaushirt/cp4waiops-deployer.git Go to the deployer directory\ncd cp4waiops-deployer Now you‚Äôre good to start with the installation.\n"},{"id":12,"href":"/cp4waiops-training/installing-operator/install_operator_02/","title":"Preparing Installation","parent":"Installing the Operator","content":" Preparing the Installation In order to install the AIManager Operator you first have to create the following resources:\nNamespace OperatorGroup IBM Pull Secret (Entitlement) You can find details on how to do this in the Official documentation: https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=manager-starter-installation-cli Task: Create the Namespace Solution Create the namespace (project) Create a namespace called cp4waiops, by running the following command:\noc create namespace cp4waiops This creates the Namespace in which you will install AIManager\nTask: Create the Operator Group Solution Create the OperatorGroup Create the Operator group by running the following command:\ncat \u003c\u003c EOF | oc apply -f - apiVersion: operators.coreos.com/v1 kind: OperatorGroup metadata: name: cp4waiops-operator-group namespace: cp4waiops spec: targetNamespaces: - cp4waiops EOF This creates the OperatorGroup needed for the Operator to deploy into the cp4waiops Namespace\nTask: Create the Pull Secret Solution Create the entitlement key pull secret Log in to MyIBM Container Software Library with the IBMid.\nIn the Entitlement keys section, select Copy key to copy your entitlement key to the clipboard.\nRun the following command:\noc create secret docker-registry ibm-entitlement-key \\ --docker-username=cp\\ --docker-password=_entitlement-key_ \\ --docker-server=cp.icr.io \\ --namespace=cp4waiops Where _entitlement-key_ is the entitlement key that you copied in the previous step.\nThis creates the Secret with your IBM Entitlement that will allow the images to be pulled from the IBM Container Registry\n"},{"id":13,"href":"/cp4waiops-training/installing-operator/install_operator_03/","title":"Install Catalog","parent":"Installing the Operator","content":" Installing the IBM Catalog Task: Install the IBM Catalog Source Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=manager-starter-installation-cli Add the AI Manager catalog source to your OpenShift cluster. Solution Run the following command to create the CatalogSource.\ncat \u003c\u003c EOF | oc apply -f - apiVersion: operators.coreos.com/v1alpha1 kind: CatalogSource metadata: name: ibm-operator-catalog namespace: openshift-marketplace spec: displayName: ibm-operator-catalog publisher: IBM Content sourceType: grpc image: icr.io/cpopen/ibm-operator-catalog:latest EOF Update the CatalogSource to always use the current image digest by running the following commands:\nIMGDIGEST=`oc get pods -n openshift-marketplace -l=olm.catalogSource=ibm-operator-catalog --no-headers -o=jsonpath=\"{.items[0].status.containerStatuses[0].imageID}\" -n openshift-marketplace` \u0026\u0026 \\ oc patch catalogsource ibm-operator-catalog -n openshift-marketplace --type=json -p \"[{ \"op\": \"test\", \"path\": \"/spec/image\", \"value\": \"\\\"icr.io/cpopen/ibm-operator-catalog:latest\\\"\" }, { \"op\": \"replace\", \"path\": \"/spec/image\", \"value\": \"\\\"$IMGDIGEST\\\"\" }]\" This creates the CatalogSource that provides the available IBM Operators (not just CP4WAIOPS).\nibm-operator-catalog also contains the catalogs for other IBM Cloud Paks¬Æ. If multiple IBM Cloud Paks are installed on your cluster, then the polling attribute is configured for all of them.\nYou can go to Operators/OperatorHub in your Openshift Web Console to check out the available Operators . "},{"id":14,"href":"/cp4waiops-training/installing-operator/install_operator_04/","title":"Install Operator","parent":"Installing the Operator","content":" Installing the Operator Task: Install the Operator Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=manager-starter-installation-cli Next you have to install the AIManager Operator. Solution Run the following command:\ncat \u003c\u003c EOF | oc apply -f - apiVersion: operators.coreos.com/v1alpha1 kind: Subscription metadata: name: ibm-aiops-orchestrator namespace: cp4waiops spec: channel: v3.5 installPlanApproval: Automatic name: ibm-aiops-orchestrator source: ibm-operator-catalog sourceNamespace: openshift-marketplace EOF This creates the Operator instance that will be looking for an Installation definition and start the installation if it exists (you‚Äôll create this in one of the next steps).\n"},{"id":15,"href":"/cp4waiops-training/installing-operator/install_operator_05/","title":"Check Installation","parent":"Installing the Operator","content":" Check if the Operator is ready Task: Verify that the Operator is running Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=manager-starter-installation-cli Check that the Operator is running and that you can continue with the next chapter to install AIManager. Solution Either run the following: oc get csv -n cp4waiops And you should see TODO entries with Succeeded state\nNAME DISPLAY VERSION REPLACES PHASE ibm-aiops-orchestrator.v3.5.1 IBM Cloud Pak for Watson AIOps AIManager 3.5.1 Succeeded ibm-automation-core.v1.3.11 IBM Automation Foundation Core 1.3.11 ibm-automation-core.v1.3.10 Succeeded ibm-automation-elastic.v1.3.10 IBM Elastic 1.3.10 ibm-automation-elastic.v1.3.9 Succeeded ibm-automation-eventprocessing.v1.3.11 IBM Automation Foundation Event Processing 1.3.11 ibm-automation-eventprocessing.v1.3.10 Succeeded ibm-automation-flink.v1.3.10 IBM Automation Foundation Flink 1.3.10 ibm-automation-flink.v1.3.9 Succeeded ibm-automation.v1.3.11 IBM Automation Foundation 1.3.11 ibm-automation.v1.3.10 Succeeded ibm-common-service-operator.v3.21.0 IBM Cloud Pak foundational services 3.21.0 Succeeded Or check your OpenShift Web Console\nGo to Operators Installed Operators\nYou should get this:\nYou are now done with the chapter on Installing the Operator\nPlease continue to the next chapter to learn how to install AIManager. "},{"id":16,"href":"/cp4waiops-training/installing-ai-manager/","title":"Installing AIManager","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Introduction "},{"id":17,"href":"/cp4waiops-training/installing-ai-manager/install_aimanager_00/","title":"Install AIManager","parent":"Installing AIManager","content":" Creating the AIManager Instance In this chapter you will install AIManager\nTask: Create the AIManager Instance Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=manager-starter-installation-cli Now it\u0026rsquo;s time to create the AIManager instance.\nTo do this create an instance of the AI Manager custom resource called ibm-cp-watson-aiops.\nSolution Run the following command to create an instance of AIManager.\ncat \u003c\u003c EOF | oc apply -f - apiVersion: orchestrator.aiops.ibm.com/v1alpha1 kind: Installation metadata: name: ibm-cp-watson-aiops namespace: cp4waiops spec: imagePullSecret: ibm-entitlement-key license: accept: true pakModules: - name: aiopsFoundation enabled: true - name: applicationManager enabled: true - name: aiManager enabled: true - name: connection enabled: false size: small storageClass: ibmc-file-gold-gid storageClassLargeBlock: ibmc-block-gold EOF This creates the Installation instance that the Operator will pick up and start the installation.\nThis takes up to 60 minutes\nThis takes some time depending on what region of ROKS you have chosen.\n‚ùó Wait for the installation to complete before continuing. The next step explains how to follow the installation progress. This works only on IBM ROKS\nIf you want to install on another platform you will have to adapt storageClass and storageClassLargeBlock to your available storage classes. "},{"id":18,"href":"/cp4waiops-training/installing-ai-manager/install_aimanager_01/","title":"Check Installation","parent":"Installing AIManager","content":" Check if the AIManager Installation is ready Task: Verify that the AIManager Installation is ready Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=manager-starter-installation-cli Check that AIManager is running and that you can continue with the next chapter to install the third-party systems that will support your training. Solution Check with the Command Line Run the following:\nwhile :; do clear; echo \"Checking...\"; echo \"Exit with Ctrl-C\"; echo \"---------------\"; echo \"Not Ready: $(oc get po -n cp4waiops | grep -v Completed | grep -v Error |grep -v '0/' |wc -l| tr -d ' ')\"; echo \"Ready: $(oc get po -n cp4waiops | grep -v Completed | grep -v Error |grep '0/' |wc -l| tr -d ' ')\"; echo \"---------------\"; oc get po -n cp4waiops | grep -v Completed | grep -v Error |grep '0/'; sleep 5; done This will list the Pods that are not Ready yet.\n‚úÖ And when done you should get only the numbers, about Ready: 126 and Not Ready: 0.\nCheck with your OpenShift Web Console Select Pods and your cp4waiops Project\nFilter for the relevant statuses\nThe drop-down also shows you the number of Pods for the different statuses.\nSort by Ready column\nThis allows you to follow along the progress of the installation.\n‚úÖ When done you should have about 126 Pods in Running status and all Pods should be 1/1, 2/2, 3/3, ...\nInstallation takes up to 60 minutes\nThis takes some time depending on what region of ROKS you have chosen.\n‚ùó Wait for the installation to complete before continuing. The next step explains how to follow the installation progress. Topology-Search Pod not starting\nIf you have about 125 pods running and\nif the aiops-topology-search-xxxx-xxxx Pod is restarting (CrashLoopBackOff).\nüöÄ Please execute the following:\noc patch deployment aiops-topology-search -n cp4waiops --patch-file \u0026#34;./ansible/roles/cp4waiops-ai-manager/templates/waiops/patches/aiops-topology-search-patch.yaml\u0026#34; You are now done with the chapter on Installing AIManager\nPlease continue to the next chapter to learn how to install the Training Resources. "},{"id":19,"href":"/cp4waiops-training/installing-training-resources/","title":"Installing Training resources","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Introduction "},{"id":20,"href":"/cp4waiops-training/installing-training-resources/configure_training_00/","title":"Training Resources","parent":"Installing Training resources","content":" Installing Training resources In this chapter you will install resources that are needed for the configuration of AIManager in the next chapter.\nThose are assets that typically already exist at a customer:\nOpenLDAP AWX (Open Source Ansible Tower) with preloaded Playbooks RobotShop Demo App Demo Service Account This will also load training data for:\nLog Anomalies\nYou will integrate with your live ELK instance but you probably don\u0026rsquo;t have 2-3 days to wait for ELK to collect enough logs. So we\u0026rsquo;ll train on this pre-canned Log Data.\nMetric Anomalies\nFor this training we won\u0026rsquo;t have a Metric provider (Instana, \u0026hellip;) so we\u0026rsquo;ll train on pre-canned Metric Data. If you want you can always integrate an existing Metric Source on top of the provided training data.\nService Now - Similar Incidents\nFor this training we won\u0026rsquo;t have a Service Now Instance so we\u0026rsquo;ll train on pre-canned SNOW Data. If you want you can always integrate an existing SNOW instance on top of the provided training data. You can find documentation here "},{"id":21,"href":"/cp4waiops-training/installing-training-resources/configure_training_01/","title":"Installing Training Resources","parent":"Installing Training resources","content":" Installing Training resources Step: Launch the script to create the training resources Run the following code to start the creation of the Training Resources.\ncat \u0026lt;\u0026lt; EOF | oc apply -f - kind: ClusterRoleBinding apiVersion: rbac.authorization.k8s.io/v1 metadata: name: installer-default-default roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: default namespace: default --- apiVersion: batch/v1 kind: Job metadata: name: waiops-easy-install-aimanager-practicum namespace: default spec: serviceAccountName: installer-default-default template: spec: containers: - name: install image: niklaushirt/cp4waiops-tools:1.3 imagePullPolicy: IfNotPresent resources: requests: memory: \u0026#34;64Mi\u0026#34; cpu: \u0026#34;150m\u0026#34; limits: memory: \u0026#34;1256Mi\u0026#34; cpu: \u0026#34;1200m\u0026#34; command: - /bin/sh - -c - | #!/bin/bash #set -x echo \u0026#34;*****************************************************************************************************************************\u0026#34; echo \u0026#34; ‚úÖ STARTING: INSTALL AIManager with Demo Content\u0026#34; echo \u0026#34;*****************************************************************************************************************************\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;------------------------------------------------------------------------------------------------------------------------------\u0026#34; echo \u0026#34; üì• Clone Repo https://github.com/niklaushirt/cp4waiops-deployer.git\u0026#34; git clone https://github.com/niklaushirt/cp4waiops-deployer.git cd cp4waiops-deployer echo \u0026#34;\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;------------------------------------------------------------------------------------------------------------------------------\u0026#34; echo \u0026#34; üöÄ Prepare Ansible\u0026#34; ansible-galaxy collection install community.kubernetes:1.2.1 ansible-galaxy collection install kubernetes.core:2.2.3 ansible-galaxy collection install cloud.common pip install openshift pyyaml kubernetes echo \u0026#34;\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;------------------------------------------------------------------------------------------------------------------------------\u0026#34; echo \u0026#34; üöÄ Starting Installation\u0026#34; ansible-playbook ./ansible/00_cp4waiops-install.yaml -e \u0026#34;config_file_path=./configs/cp4waiops-roks-aimanager-practicum.yaml\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;\u0026#34; echo \u0026#34;*****************************************************************************************************************************\u0026#34; echo \u0026#34; ‚úÖ DONE\u0026#34; echo \u0026#34;*****************************************************************************************************************************\u0026#34; while true do sleep 1000 done restartPolicy: Never backoffLimit: 4 EOF You should get:\nclusterrolebinding.rbac.authorization.k8s.io/installer-default-default created or unchanged if you have already lauched it once job.batch/waiops-easy-install-aimanager-practicum created This creates a Job in the default Namespace that will create and load all the stuff that you need for the next chapter.\n"},{"id":22,"href":"/cp4waiops-training/installing-training-resources/configure_training_02/","title":"Check Installation","parent":"Installing Training resources","content":" Check the Training Resources Step: Check if all Training Resources have been installed and are ready You can follow along the process by running:\n./tools/11_fzth/stream_remote_logs.sh Or through the OpensHift Web Console:\nSelect default Namespace\nSelect Pods\nClick on the waiops-easy-install-aimanager-practicum-... Pod\nSelect Logs\n‚úÖ And when done you should get the following with failed=0.\nPLAY RECAP ********************************************************************* localhost : ok=XXX changed=XXX unreachable=0 failed=0 skipped=XXX rescued=0 ignored=0 ***************************************************************************************************************************** ‚úÖ DONE ***************************************************************************************************************************** "},{"id":23,"href":"/cp4waiops-training/installing-training-resources/configure_training_03/","title":"Initialize ELK","parent":"Installing Training resources","content":" Initial ELK Setup Step: Open ELK In your OpenShift Console click on the Applications Menu\nSelect Logging\nStep: Initialize ELK Click Allow selected permissions\nInput app* for the index pattern\nClick Next Step\nSelect @timestamp for time filter\nClick Create Index Pattern\nClick on Discover\nELK is now configured. Verify that you have Logs coming in.\nYou are now done with the chapter on creating Training Resources\nPlease continue to the next chapter to learn how to Configure AIManager. "},{"id":24,"href":"/cp4waiops-training/configure-ai-manager/","title":"Configure AIManager","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Configure AIManager "},{"id":25,"href":"/cp4waiops-training/configure-ai-manager/configure_aimanager_00/","title":"Configure AIManager","parent":"Configure AIManager","content":" Configure AIManager In this chapter you will:\nIntegrate AIManager with OpenLDAP for user management Integrate AIManager with ELK for Log Anomalies Define and train AI Models for Log Anomaly Detectiom Metric Anomaly Detection Event Grouping Similar Incidents Change Risk Create Policies for Story creation and Runbook assignment Integrate AIManager with Ansible Tower and create Runbooks in AIManager Create a RobotShop Application Topology Integrate AIManager with Slack "},{"id":26,"href":"/cp4waiops-training/configure-ai-manager/configure_aimanager_01/","title":"Get the information","parent":"Configure AIManager","content":" Get the configuration Information Task: Get the configuration Information This will provide you with all the information and details that you need to configure AIManager in this chapter.\nRun the following command to save a list of all the information to the MY_CONFIGURATION.txt file.\nYou will need this information for the configuration of AIManager in this chapter. ./tools/11_fzth/get_configuration_info.sh \u0026gt; MY_CONFIGURATION.txt "},{"id":27,"href":"/cp4waiops-training/configure-ai-manager/configure_aimanager_03/","title":"First Login","parent":"Configure AIManager","content":" Your first Login to AIManager Task: Open the DemoUI In your OpenShift Console click on the Applications Menu\nSelect CP4WAIOps Demo UI\nLogin with token P4ssw0rd!\nCopy the Admin Password\nOpen AIManager\nTask: Login to AIManager Select IBM provided credentials\nLogin with admin user and the password you copied in the step above\nWelcome to AIManager\n"},{"id":28,"href":"/cp4waiops-training/configure-ai-manager/configure_aimanager_04/","title":"Configure LDAP","parent":"Configure AIManager","content":" Configure LDAP integration In this section you will connect to the existing LDAP Server and create a user with Administrative rights:\nTask: Create the LDAP Connection Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=authentication-configuring-ldap-connections Connect to the existing LDAP Server using the following parameters:\nServer type: Custom Base DN: dc=ibm,dc=com Bind DN: cn=admin,dc=ibm,dc=com Bind DN password: P4ssw0rd! LDAP server URL: ldap://openldap.openldap:389 Group filter: (\u0026amp;(cn=%v)(objectclass=groupOfUniqueNames)) User filter: (\u0026amp;(uid=%v)(objectclass=Person)) \u0026lt;-- Thats the only value you should have to change Group ID map: *:cn User ID map: *:uid Group member ID map: groupOfUniqueNames:uniqueMember Solution Create LDAP provider In the AIManager ‚ÄúHamburger‚Äù Menu select Access Control\nIn the top right Click Identity provider configuration\nYou might have to re-login with your admin user\nIn the top right Click New Connection\nSelect LDAP from the dropdown\nClick Next\nFill out the first section of fields:\nConnection name: LDAP Server type: Custom Base DN: dc=ibm,dc=com Bind DN: cn=admin,dc=ibm,dc=com Bind DN password: P4ssw0rd! LDAP server URL: ldap://openldap.openldap:389 Click Test connection. You should get Successful connection\nFill out the rest of the fields:\nGroup filter: (\u0026(cn=%v)(objectclass=groupOfUniqueNames)) User filter: (\u0026(uid=%v)(objectclass=Person)) \u003c-- Thats the only value you should have to change Group ID map: *:cn User ID map: *:uid Group member ID map: groupOfUniqueNames:uniqueMember Click Create\nYou should get a LDAP entry in the provider list\nTask: Create a User in AIManager Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=control-adding-users Create a user in AIManager with Admin rights. Solution Create User Go back to AIManager, click on the ‚ÄúHamburger‚Äù Menu and select Access Control\nIn the top right Click Add users\nIn the search box type demo\nClick on the demo/demo/demo@ibm.com line\nClick Next\nClick Assign roles directly\nClick Next\nCheck Administrator role\nClick Next\nClick Add\nLogin as Demo In AIManager, click on the round image in the top right and select Log Out\nClick Logout\nClick Log in\nEnter credentials demo and P4ssw0rd! (this information is stored in the LDAP server)\nWelcome back in AIManager as user Demo\n"},{"id":29,"href":"/cp4waiops-training/configure-ai-manager/configure_aimanager_05/","title":"Configure ELK","parent":"Configure AIManager","content":" Configure ELK Integration In this section you will create the integration with ELK.\nTask: Create the ELK Integration Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=connections-elk Create the ELK Integration with the following parameters:\nELK service URL: from MY_CONFIGURATION.txt Kibana URL: from MY_CONFIGURATION.txt Authentication type: Token Token: from MY_CONFIGURATION.txt Filter: { \u0026#34;query\u0026#34;: { \u0026#34;bool\u0026#34;: { \u0026#34;must\u0026#34;: { \u0026#34;term\u0026#34; : { \u0026#34;kubernetes.namespace_name\u0026#34; : \u0026#34;robot-shop\u0026#34; } } } } } TimeZone:\tset to your Timezone\tKibana port: 443 Mapping: { \u0026#34;codec\u0026#34;: \u0026#34;elk\u0026#34;, \u0026#34;message_field\u0026#34;: \u0026#34;message\u0026#34;, \u0026#34;log_entity_types\u0026#34;: \u0026#34;kubernetes.container_image_id, kubernetes.host, kubernetes.pod_name, kubernetes.namespace_name\u0026#34;, \u0026#34;instance_id_field\u0026#34;: \u0026#34;kubernetes.container_name\u0026#34;, \u0026#34;rolling_time\u0026#34;: 10, \u0026#34;timestamp_field\u0026#34;: \u0026#34;@timestamp\u0026#34; } Solution In the AIManager ‚ÄúHamburger‚Äù Menu select Define/Data and tool connections\nClick Add connection\nUnder ELK, click on Add connection\nClick Connect\nName it ELK\nüîé Get the data from your configuration file MY_CONFIGURATION.txt - section 2.2 Configure ELK\n./tools/11_fzth/get_configuration_info.sh \u003e MY_CONFIGURATION.txt Fill out the fields on the first page:\nELK service URL: from MY_CONFIGURATION.txt Kibana URL: from MY_CONFIGURATION.txt Authentication type: Token Token: from MY_CONFIGURATION.txt Filter: { \"query\": { \"bool\": { \"must\": { \"term\" : { \"kubernetes.namespace_name\" : \"robot-shop\" } } } } } TimeZone:\tset to your Timezone\tKibana port: 443 Click Test connection. You should get Connection successful!\nClick Next\nFill out the Field mapping:\n{ \"codec\": \"elk\", \"message_field\": \"message\", \"log_entity_types\": \"kubernetes.container_image_id, kubernetes.host, kubernetes.pod_name, kubernetes.namespace_name\", \"instance_id_field\": \"kubernetes.container_name\", \"rolling_time\": 10, \"timestamp_field\": \"@timestamp\" } Click Next\nTurn On Data collection\nSelect Live data for continuous AI training and anomaly detection\nClick Done\nMake sure that the Data Collection and Connection Status turn green after a few minutes\n"},{"id":30,"href":"/cp4waiops-training/configure-ai-manager/configure_aimanager_06/","title":"Configure Runbooks","parent":"Configure AIManager","content":" Configure Runbooks In this section you will create the connection to Ansible Tower and create your first Runbook.\nTask: Create the Ansible Tower Connection Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=connections-ansible Create the connection to Ansible Tower Solution In the AIManager ‚ÄúHamburger‚Äù Menu select Define/Data and tool connections\nClick Add connection\nUnder Ansible Automation Controller, click on Add connection\nClick Connect\nüîé Get the data from your configuration file MY_CONFIGURATION.txt - section 2.3 Configure Runbooks - Ansible Automation Controller\n./tools/11_fzth/get_configuration_info.sh \u003e MY_CONFIGURATION.txt Fill out the fields:\nURL for REST API: from MY_CONFIGURATION.txt Authentication type: User ID/Password User: admin Password: from MY_CONFIGURATION.txt Click Done\nMake sure that the Connection Status turn green after a few seconds\nCheck integration In the AIManager ‚ÄúHamburger‚Äù Menu select Operate/Automations\nSelect tab Actions\nVerify that the Ansible Playbooks have been imported\nTask: Create a Runbook Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=library-create-runbook Create a Runbook based on the CP4WAIOPS Mitigate Robotshop Ratings Outage Ansible Playbook Solution Select tab Runbooks\nClick Create Runbook\nName it RobotShop Mitigate MySQL Problem\nClick Add automated step\nSelect CP4WAIOPS Mitigate Robotshop Ratings Outage\nClick Select this action\nClick Mapping / Select\nSelect New runbook parameter\nSelect tab\nüîé Get the data from your configuration file MY_CONFIGURATION.txt - section 2.4 Configure Runbooks - Runbook Parameters\n./tools/11_fzth/get_configuration_info.sh \u003e MY_CONFIGURATION.txt Replace PROVIDE: my_k8s_apiurl and my_k8s_apikey in field Default value (optional) with the value from the script\nClick Save\nClick Save again\nClick Actions and Publish\n"},{"id":31,"href":"/cp4waiops-training/configure-ai-manager/configure_aimanager_07/","title":"Configure Policies","parent":"Configure AIManager","content":" Configure Policies In this section you will enable a Policy to create Stories and create a Policy to assign a Runbook to a Story.\nTask: Enable Story creation Policy Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=policies-default-story-creation AIManager provides two preset/of the box story creation policies. For story creation to occur, you must enable one of these default policies, or create your own custom story creation policy. These policies are disabled by default. Solution In the AIManager ‚ÄúHamburger‚Äù Menu select Operate/Automations\nSelect tab Policies\nClick on the Tag dropdown\nSelect Stories and Runbooks\nTurn on Policy Default story creation policy for all alerts\nTask: Create Runbook Assignment Policy Documentation ttps://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=policies-assign-runbook-alerts For this training, you want to have a runbook take action when you receive alerts that the MySQL database is not reachable. Create a policy to use this runbook every time alerts warn of of a problem with the MySQL database. Solution Click on Create Policy\nClick on Assign a runbook to alerts\nName it RobotShop Mitigate MySQL Problem\nScroll down to Condition sets\nClick in field Property\nType name\nSelect resource / name\nUnder Operator select contains\nClick in field Value\nType mysql\nSelect String: mysql\nCheck runbook RobotShop Mitigate MySQL Problem\nCheck Use default parameter value\nClick Create Policy\nYour list of Policies should now look like this\n"},{"id":32,"href":"/cp4waiops-training/configure-ai-manager/configure_aimanager_08/","title":"Configure Applications","parent":"Configure AIManager","content":" Create RobotShop Application In this section you will connect to the existing Kubernetes Cluster and create an Applciation for RobotShop.\nTask: Create Kubernetes Connection (Observer) Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=connections-kubernetes A Kubernetes connection provides data about workloads in a Kubernetes cluster and namespace that you choose.\nIt loads baseline topology data, such as information about pods, worker nodes, and containers, as well as status from Kubernetes. Create a Kubernetes connection to create a Topology for the internal RoboShop application. Solution In the AIManager ‚ÄúHamburger‚Äù Menu select Define/Data and tool connections\nClick Add connection\nUnder Kubernetes, click on Add connection\nClick Connect\nüîé Get the data from your configuration file MY_CONFIGURATION.txt - section 2.5 Configure Applications - RobotShop Kubernetes Observer\n./tools/11_fzth/get_configuration_info.sh \u003e MY_CONFIGURATION.txt Fill out the first section of fields (Add connection):\nName: RobotShop Data center: robot-shop Click Next\nFill out the first section of fields (Set advanced options):\nKubernetes master IP address: 172.21.0.1 Kubernetes API port: 443 Token:\tfrom MY_CONFIGURATION.txt Trust all HTTPS certificates: true Correlate analytics events:\ttrue Namespaces to observe: robot-shop Click Next\nClick Done\nThe Integration should show Running and eventually Successunder Schedule\nTask: Configure RobotShop Application Documentation ttps://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=applications-defining-editing You define applications by adding Resource Groups, icons and tags, assigning business criticality levels, and setting service disruption costs.\nCreate an application with all RobotShop related Resource Groups. Solution In the AIManager ‚ÄúHamburger‚Äù Menu select Operate/Resource management\nSelect tab Applications\nClick Define Application\nSelect the two Resource Group\nClick Next\nClick Next\nEnter Name RobotShop\nClick on the heart to Mark as favorite\nEnter 1000 into Estimated cost per minute for service disruption\nClick Define Applications\n"},{"id":33,"href":"/cp4waiops-training/configure-ai-manager/configure_aimanager_09/","title":"Configure Certificates","parent":"Configure AIManager","content":" Create valid Ingress Certificates A signed certificate is needed on the NGNIX pods for the Slack and Teams integrations.\nThe AutomationUIConfig instance controls the certificates and the NGINX pods that use them.\nTask: Create valid Ingress Certificates Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=manager-starter-installation-cli Create valid Ingress Certificates Solution Patch NetworkPolicy Run the following command to patch the NetworkPolicy\nexport WAIOPS_NAMESPACE=$(oc get po -A|grep aiops-orchestrator-controller |awk '{print$1}') cat \u003c"},{"id":34,"href":"/cp4waiops-training/train-the-models/","title":"Train the Models","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Train the Models "},{"id":35,"href":"/cp4waiops-training/train-the-models/train_models_00/","title":"Train the Models","parent":"Train the Models","content":" Train the Models In this chapter you will define and train AI Models for\nLog Anomaly Detectiom Metric Anomaly Detection Event Grouping Similar Incidents Change Risk "},{"id":36,"href":"/cp4waiops-training/train-the-models/train_models_01/","title":"Log Anomalies","parent":"Train the Models","content":" Define and run LogAnomaly Training Task: Define and run LogAnomaly Training Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=algorithms-natural-language-log-anomaly-detection In this section you will set up and run training for this AI algorithm to detect unusual patterns in your logs and notify you by generating an alert when they occur.\nSet up and run training for Logs ingested from March 3rd 2022 to March 4th 2022\nSolution Define Log Anomalies Training In the AIManager ‚ÄúHamburger‚Äù Menu select Operate/AI Model Management\nUnder Log anomaly detection - natural language, click on Set up training\nClick Next\nUnder Select data check Custom\nSelect Start date as March, 3rd 2022\nSelect End date as March, 4rd 2022\nClick Next\nClick Next\nClick Next\nUnder Deployment type check On completion\nClick Done\nRun Log Anomalies Training Click on the three dots in the upper right corner of the Log anomaly detection - natural language card\nSelect Start Training\nStatus should say In progress\nAnd eventually say Deployed\n"},{"id":37,"href":"/cp4waiops-training/train-the-models/train_models_02/","title":"Metric Anomalies","parent":"Train the Models","content":" Define and run Metric Anomaly Training Task: Define and run Metric Anomaly Training Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=algorithms-metric-anomaly-detection In this section you will set up and run training for this AI algorithm to detect anomalous behaviour in your metrics and notify you by generating an alert when they occur. Solution Define Metric Anomalies Training In the AIManager ‚ÄúHamburger‚Äù Menu select Operate/AI Model Management Under Metric anomaly detection, click on Set up training Click Next Click Next Click Done Run Metric Anomalies Training Click on the three dots in the upper right corner of the Metric anomaly detection card Select Start Training Status should say In progress And eventually say Deployed "},{"id":38,"href":"/cp4waiops-training/train-the-models/train_models_03/","title":"Similar Incidents","parent":"Train the Models","content":" Define and run Similar Incidents Training Task: Define and run Similar Incidents Training Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=algorithms-similar-incidents In this section you will set up and run training for this AI algorithm to enable the discovery of historical incidents (tickets) to aid in the remediation of current incidents. Solution Define Similar Incidents Training In the AIManager ‚ÄúHamburger‚Äù Menu select Operate/AI Model Management Under Similar Incidents, click on Set up training Click Next Click Next Click Done Run Similar Incidents Training Click on the three dots in the upper right corner of the Similar Incidents card Select Start Training Status should say In progress And eventually say Deployed "},{"id":39,"href":"/cp4waiops-training/train-the-models/train_models_04/","title":"Change Risk","parent":"Train the Models","content":" Define and run Change Risk Training Task: Define and run Change Risk Training Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=algorithms-change-risk In this section you will set up and run training for this AI algorithm to determine how likely it is that a proposed change would cause a problem. Solution Define Change Risk Training In the AIManager ‚ÄúHamburger‚Äù Menu select Operate/AI Model Management Under Change Risk, click on Set up training Click Next Click Next Under Deployment type check On completion Click Done Run Change Risk Training Click on the three dots in the upper right corner of the Change Risk card Select Start Training Status should say In progress And eventually say Deployed "},{"id":40,"href":"/cp4waiops-training/train-the-models/train_models_05/","title":"Temporal Grouping","parent":"Train the Models","content":" Define and run Temporal Grouping Training Task: Define and run Temporal Grouping Training Documentation https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.5.0?topic=algorithms-temporal-grouping This AI algorithm can start to discover groups after a pattern is learned, which might take hours or days. For example, if a problem occurs in the first and the fourth week of January and again in March, the algorithm learns to group the alerts that tend to co-occur when the problem happens.\nIn this section you will set up and run training for this AI algorithm to learn patterns in Event occurence and group patterns witt temporal correlation.\nSolution Define Temporal Grouping Training In the AIManager ‚ÄúHamburger‚Äù Menu select Operate/AI Model Management Under Temporal Grouping, click on Set up training Click Next Click Next Click Done Run Temporal Grouping Training Click on the three dots in the upper right corner of the Temporal Grouping card Select Start Training Status should say In progress And eventually say Deployed "},{"id":41,"href":"/cp4waiops-training/train-the-models/train_models_06/","title":"Check Training","parent":"Train the Models","content":" Check Training Status Task: Check the Status of the Training Check your Training Cards. All should be green and say Deployed\nYou are now done with the chapter on Training the AIManager Models You have successfully completed installing and configuring AIManager ‚úÖ Please continue to the next chapter to learn how to test your installation . "},{"id":42,"href":"/cp4waiops-training/test-and-demo/test_and_demo_00/","title":"Test and Demo","parent":"Test And Demo","content":" Test and Demo In this chapter you will test and discover your installation.\n"},{"id":43,"href":"/cp4waiops-training/test-and-demo/","title":"Test And Demo","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Configure AIManager "},{"id":44,"href":"/cp4waiops-training/test-and-demo/test_and_demo_01/","title":"Create Test Incident","parent":"Test And Demo","content":" Create a Test Incident Step: Create a Test Incident In your OpenShift Console click on the Applications Menu\nSelect CP4WAIOps Demo UI\nLogin with token P4ssw0rd!\nClick on Create Incident Memory Leak\nWait for pop-up to go away and the Demo UI going back to the homepage\n"},{"id":45,"href":"/cp4waiops-training/test-and-demo/test_and_demo_02/","title":"Examine the Incident","parent":"Test And Demo","content":" Examine the Incident Step: Examine the Alerts In the AIManager \u0026ldquo;Hamburger\u0026rdquo; Menu select Operate/Stories and Alerts\nClick on Alerts\nYou should see some Alerts coming in\nStep: Examine the Stories Click on Stories\nYou should see some Stories\nClick on the first Story in the list (it should be P2 or P1 but the name can differ)\nYou should see some Stories\nYou should see the detail of the Story, with the Probable Cause, the Runbooks and the Similar Incidents\nClick on Alerts, you should see the list of grouped Alerts that are part of the Story\nClick on Topology, you should see the Topology of the components being impacted by the incident\nClick on Overview to go back to the Story overview\nStep: Go crazy üôÉ You can now start to play around with the Story: Assign to a user Change Status Change Severity Run the Runbook See the Similar Incidents The links to the similar incidents are pre-canned, static Webpages, as we don\u0026rsquo;t have a live ServiceNow instance "},{"id":46,"href":"/cp4waiops-training/test-and-demo/test_and_demo_03/","title":"Clear the Incident","parent":"Test And Demo","content":" Clear the Incident Step: Clear the Incident Go back to the Demo UI\nClick on Clear Stories and Events\nWait for pop-up to go away and the Demo UI going back to the homepage\nThe Alerts will be Closed and the Stories Resolved\nYou will have to wait for about 10 minutes for them to disappear (you can recreate the incident earlier, which will just re-open the existing Stories )\n"},{"id":47,"href":"/cp4waiops-training/configure-slack/","title":"Configure Slack (optional)","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Configure Slack Integration "},{"id":48,"href":"/cp4waiops-training/configure-slack/configure_slack_01/","title":"Slack Setup","parent":"Configure Slack (optional)","content":" Initial Slack Setup For the system to work you need to setup your own secure gateway and slack workspace. It is suggested that you do this within the public slack so that you can invite the customer to the experience as well. It also makes it easier for is to release this image to Business partners\nYou will need to create your own workspace to connect to your instance of CP4WAOps.\nHere are the steps to follow:\nCreate Slack Workspace Create Slack App Create Slack Channels Create Slack Integration Get the Integration URL - Public Cloud (ROKS, \u0026hellip;) Create Slack App Communications Slack Reset "},{"id":49,"href":"/cp4waiops-training/configure-slack/configure_slack_02/","title":"Create Workspace","parent":"Configure Slack (optional)","content":" Create your Slack Workspace Step: Create your Slack Workspace Create a Slack workspace by going to https://slack.com/get-started#/createnew and logging in with an email which is not your IBM email. Your IBM email is part of the IBM Slack enterprise account and you will not be able to create an independent Slack workspace outside if the IBM slack service.\nAfter authentication, you will see the following screen:\nClick Create a Workspace -\u0026gt;\nName your Slack workspace\nGive your workspace a unique name such as aiops-\u0026lt;yourname\u0026gt;.\nDescribe the workspace current purpose\nThis is free text, you may simply write ‚Äúdemo for Watson AIOps‚Äù or whatever you like.\nAdd team members\nYou may add team members to your new Slack workspace or skip this step.\nAt this point you have created your own Slack workspace where you are the administrator and can perform all the necessary steps to integrate with CP4WAOps.\n‚ùó This Slack workspace is outside the control of IBM and must be treated as a completely public environment. Do not place any confidential material in this Slack workspace.\n"},{"id":50,"href":"/cp4waiops-training/configure-slack/configure_slack_03/","title":"Create Your App","parent":"Configure Slack (optional)","content":" Create Your Slack App Step: Create Your Slack App Create a Slack app, by going to https://api.slack.com/apps and clicking Create New App.\nSelect From an app manifest\nSelect the appropriate workspace that you have created before and click Next\nCopy and paste the content of this file slack-app-manifest.yaml .\nAdapt the Name and Display Name to your likings\nDon\u0026rsquo;t bother with the URLs just yet, we will adapt them as needed.\nClick Next\nClick Create\nScroll down to Display Information and name your CP4WAIOPS app\nYou can add an icon to the app\nClick save changes\nIn the Basic Information menu click on Install to Workspace then click Allow\n"},{"id":51,"href":"/cp4waiops-training/configure-slack/configure_slack_04/","title":"Create Your Channels","parent":"Configure Slack (optional)","content":" Create Your Slack Channels Step: Create Your Slack Channels In Slack add a two new channels:\ncp4waiops-stories cp4waiops-change-risk You can name the channel whatever you want.\nRight click on each channel and select Copy Link\nThis should get you something like this https://xxxx.slack.com/archives/C021QOY16BW The last part of the URL is the channel ID (i.e. C021QOY16BW).\nWrite them down for both channels\nUnder Apps click Browse Apps\nSelect the App you just have created\nInvite the Application to each of the two channels by typing\n@\u0026lt;MyAppname\u0026gt; Select Add to channel\nYou shoud get a message from saying was added to #\u0026lt;your-channel\u0026gt; by ...\n"},{"id":52,"href":"/cp4waiops-training/configure-slack/configure_slack_05/","title":"Integrate","parent":"Configure Slack (optional)","content":" Integrate Your Slack App Step: Integrate Your Slack App - in Slack In the Basic Information menu get the Signing Secret (not the Client Secret!) and jot it down\nIn the OAuth \u0026amp; Permissions get the Bot User OAuth Token (not the User OAuth Token!) and jot it down\nStep: Integrate Your Slack App - in AIManager Go to Data and tool connections\nUnder Slack select Add integration\nName it \u0026ldquo;Slack\u0026rdquo;\nPaste the Signing Secret from above\nPaste the Bot User OAuth Token from above\nPaste the channel IDs from the channel creation step in the respective fields\nTest the connection and click save\n"},{"id":53,"href":"/cp4waiops-training/configure-slack/configure_slack_06/","title":"Get the Integration URL","parent":"Configure Slack (optional)","content":" Get the Integration URL (Public Cloud (ROKS, \u0026hellip;)) Step: Create the Integration URL In AIManager: Go to Data and tool connections\nUnder Slack click on 1 integration\nCopy out the URL\nThis is the URL you will be using for step 6.\n"},{"id":54,"href":"/cp4waiops-training/configure-slack/configure_slack_07/","title":"Configure","parent":"Configure Slack (optional)","content":" Create Slack App Communications Step: Event Subscriptions Return to the browser tab for the Slack app.\nSelect Event Subscriptions.\nIn the Enable Events section, click the slider to enable events.\nFor the Request URL field use the Request URL from step 5.\ne.g: https://\u0026lt;my-url\u0026gt;/aiops/aimanager/instances/xxxxx/api/slack/events\nAfter pasting the value in the field, a Verified message should display.\nIf you get an error please check that you have followed this Verify that on the Subscribe to bot events section you got:\napp_mention and member_joined_channel events. Click Save Changes button.\nStep: Interactivity \u0026amp; Shortcuts Select Interactivity \u0026amp; Shortcuts.\nIn the Interactivity section, click the slider to enable interactivity. For the Request URL field, use use the URL from above.\nThere is no automatic verification for this form\nClick Save Changes button.\nStep: Slash Commands Now, configure the welcome slash command. With this command, you can trigger the welcome message again if you closed it.\nSelect Slash Commands\nClick Create New Command to create a new slash command.\nUse the following values:\nField Value Command /welcome Request URL the URL from above Short Description Welcome to Watson AIOps Click Save.\nStep: Reinstall App The Slack app must be reinstalled, as several permissions have changed.\nSelect Install App Click Reinstall to Workspace Once the workspace request is approved, the Slack integration is complete.\n"},{"id":55,"href":"/cp4waiops-training/configure-servicenow/","title":"Configure ServiceNow (optional)","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Configure ServiceNow Integration "},{"id":56,"href":"/cp4waiops-training/configure-servicenow/configure_snow_01/","title":"Setup ServiceNow","parent":"Configure ServiceNow (optional)","content":" Introduction The purpose of this guide is to provide a self-contained set of instructions to integrate with ServiceNow, summarizing instructions from IBM Documentation and other sources.\nServiceNow integrations provide historical and live data for change requests, incidents, and problems. ServiceNow integrations also provide inventory data for the ServiceNow observer.\nYou can only have one ServiceNow integration per instance. The instructions have been successfully tested against a ROKS cluster on the IBM Cloud.\n"},{"id":57,"href":"/cp4waiops-training/configure-servicenow/configure_snow_02/","title":"Prerequisites","parent":"Configure ServiceNow (optional)","content":" Prerequisites Step: Procure a ServiceNow Developer Instance Join the ServiceNow Developer Program , login with your credentials and request a Personal Developer Instance (PDI) with version \u0026ldquo;Paris\u0026rdquo; and patch 4 or higher. If you get a different version, you can release/return the instance you just got from the top right menu and request a new one. Then it will ask you to choose the version as shown below:\nYou can read about PDI here .\nNote that your instance will go to sleep after a few hours if not used and if you are inactive for ten or more days the developer instance will be deleted!. You will have two sets of credentials: one for your ServiceNow developer account and another set for the developer instance itself. The ServiceNow developer instance comes loaded with some test data such as open incidents, change requests, etc.\nStep: Install the WAIOPS App in your ServiceNow Developer Instance Customers will typically install the WAIOPS app (or plug-in) from the official ServiceNow App Store .\nIn our case, because we have a developer instance, we will have to install it from a GitHub repo.\nStep: Import app into ServiceNow instance Prepare GitHub access Pre-req: Personal access token for Github.\nIf you don\u0026rsquo;t have one, follow the instructions https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token to create one (no elevated permissions needed for the token).\nObtain a developer instance for ServiceNow following the instructions from https://developer.servicenow.com/dev.do#!/guides/paris/now-platform/pdi-guide/obtaining-a-pdi (this requires a ServiceNow account which can be created as part of the steps - just sign up for a new account). Note: development instances go into hibernation when not used and are decommissined if not used for 10 days.\nLog on to the development instance.\nSearch for Credentials.\nSelect Credentials under Connections \u0026amp; Credentials.\nSelect Basic Authentication.\nEnter any name, provide your login email address for Github and as password provide your personal access token. Then click Submit.\nIn the Search field, type in Studio. Select Studio under System Applications. This will open the Application Studio in a new tab.\nIn the Select Application dialog, click Import from Source Control.\nFork GitHub repository Fork the following repository https://github.ibm.com/watson-ai4it/servicenow-integration.git\nEnter https://github.ibm.com/\u0026lt;your-repo\u0026gt;/servicenow-integration-fork as repository, main as the branch and in the Credential drop-down, select the entry with the credentials that were created in the previous steps.\nClick Import to import the source code.\n"},{"id":58,"href":"/cp4waiops-training/configure-servicenow/configure_snow_03/","title":"Configuring ServiceNow","parent":"Configure ServiceNow (optional)","content":" Configuring ServiceNow You can create stories in IBM Cloud Pak for Watson AIOps and issues in ServiceNow simultaneously. Both share information and can be tracked together. To ensure that this integration operates effectively, you must configure ServiceNow and ServiceNow integration in IBM Cloud Pak for Watson AIOps.\nAfter you configure ServiceNow and IBM Cloud Pak for Watson AIOps, the updates that you make in IBM Cloud Pak for Watson AIOps will flow into the Agent Workspace of ServiceNow.\nUpdates to event data and the state of your story in IBM Cloud Pak for Watson AIOps appear in ServiceNow. Any updates that you make in Slack or Microsoft Teams to the description, short description, or severity after you create the story do not overwrite the existing values in ServiceNow. Also, edits that are made in ServiceNow (changing descriptions or incident names, for example) are not reflected in Slack, Microsoft Teams, or IBM Cloud Pak for Watson AIOps.\nStep: Update existing Users in ServiceNow Before you create your integration, you must assign IBM Cloud Pak for Watson AIOps roles to your users in ServiceNow.\nLog in to your ServiceNow developer instance.\nIn the filter field, search for users as shown below:\nClick User Administration \u0026gt; Users to see the list of users as shown below:\nYou need two different users. Assign at least one user to each role.\nNotes: In both cases ensure that your IBM Cloud Pak for Watson AIOps users in ServiceNow are assigned the itil role in ServiceNow. The itil role enables them to have access to the Agent Workspace. If the user does not have access to the Agent Workspace, they cannot work on incidents in ServiceNow and receive a permissions error.\nImportant: Ensure that the time zone of your Events user (the user value that is used to create your ServiceNow integration) matches your system time zone in ServiceNow. If the two values are not synchronized, the flow of your change request data from ServiceNow to IBM Cloud Pak for Watson AIOps is disrupted.\nStep: User 1 - abraham.lincoln Select user abraham.lincoln\nSelect Roles Tab\nClick Edit\nAssign the following roles\nx_ibm_waiops.watson_aiops_admin itil x_ibm_waiops.watson_aiops_admin: An administrative user who can configure instances, URLs, usernames, and passwords in ServiceNow. The admin user is the only user who can see the menu options to configure IBM Cloud Pak for Watson AIOps in ServiceNow.\nSave\nSet the password to P4ssw0rd!\nClick Update on the user page\nStep: User 2 - abel.tuter Select user abel.tuter\nSelect Roles Tab\nClick Edit\nAssign the following roles\nx_ibm_waiops.watson_aiops_events_user itil cmdb_read rest_api_explorer service_viewer web_service_admin x_ibm_waiops.watson_aiops_events_user: A non-administrative user who is required to insert IBM Cloud Pak for Watson AIOps data into ServiceNow and is configured as the connector between IBM Cloud Pak for Watson AIOps and ServiceNow. Important: Ensure that you select Internal Integration User when you create or edit your Events user (the user that is used in your ServiceNow integration). Your integration user exists to exchange data between ServiceNow and IBM Cloud Pak for Watson AIOps and does not require access to the ServiceNow interface.\nSave\nSet the password to P4ssw0rd!\nClick Update on the user page\nStep: ServiceNow Service Management configuration Log in to your ServiceNow developer instance.\nIn the filter field, search for Watson AIOps as shown in the following picture:\nClick Configuration.\nEnter values for the following fields as shown in the next picture.\nURL for AIOps connection: The URL of your AI Manager instance in the format of protocol://hostname:port.\nNote: If you use a tunnel to expose the server for the ServiceNow connection, you must replace the URL with the forwarding address of the tunnel.\nName of the Watson AIOps instance: aimanager (As of CP4WAIOPS V3.1.1this is a fixed value.)\nUser name for AIOps connection: admin (The username for the IBM Cloud Pak for Watson AIOps instance.)\nPassword for AIOps connection: Your password for admin. (The password for the IBM Cloud Pak for Watson AIOps instance.)\nClick on the Save button in the top right.\nStep: Similar incident search configuration While not necessary, configuring similar incident search in ServiceNow facilitates problem resolution from within the ServiceNow interface. Configuring similar incident search enables Watson AIOps Similar Incidents in Agent Assist. You can use Agent Assist to look for other tickets that share details with the ticket that you\u0026rsquo;re reviewing. Similar incident search uses the Similar incident model that you trained in IBM Cloud Pak for Watson AIOps.\nImportant: To complete this task, you must be assigned the admin role in ServiceNow, otherwise you cannot configure Search contexts.\nLog in to your ServiceNow developer instance.\nIn the filter field, search for Search contexts as shown below:\nClick Incident Deflection to open the Incident Deflection record.\nClick the Additional Resource Configurations tab, then click Edit as shown below.\nNote: You may see a this message: \u0026ldquo;This record is in the Global application, but IBM Watson AIOps is the current application. To edit this record click here\u0026rdquo;. Click on here to go to the Global application and switch to the Global application.\nNote: If you don\u0026rsquo;t see the Edit button, go to Settings (cog in the top right corner), select Developer and under Applications select Global from the drop-down.\nSelect Watson AIOps Similar Incidents from the Collection column and add it to the Additional Resource Configurations List, then click Save.\n(Optional) You can adjust the order of how the search elements appear by adjusting the Order attribute.\nSave your Incident Deflection record.\nWatson AIOps Similar Incidents now appears as an option to search by in the Agent Assist.\n"},{"id":59,"href":"/cp4waiops-training/configure-servicenow/configure_snow_04/","title":"Configuring AIManager","parent":"Configure ServiceNow (optional)","content":" Configuring AIManager Now that we have created users and configured ServiceNow, we need to configure Cloud Pak for Watson AIOps to be able to integrate with ServiceNow.\nStep: Creating ServiceNow integrations To create a ServiceNow integration, complete the following steps:\nLog in to IBM Cloud Pak for Watson AIOps.\nFrom the console, click the navigation menu (four horizontal bars), then click Define \u0026gt; Data and tool integrations as shown below:\nOn the ServiceNow tile, click Add integration.\nNote: If you do not immediately see the integration that you want to create, you can filter the tiles by type of integration. Click the type of integration that you want in the Category section.\nEnter the following integration information as shown below: Name: The display name of your integration.\nDescription: An optional description for the integration.\nURL: The URL of your ServiceNow developer instance.\nUser ID: the ServiceNow Events user username.\nImportant: You must Make sure that you are using the correct user (abel.tuter), the Events user, for your integration. You must also make sure that the time zone set for this user matches your system time zone in ServiceNow. For more information about ServiceNow users, see Create users.\nPassword: Here this would be P4ssw0rd! (if you followed the steps above - the ServiceNow Events user password).\nEncrypted password: Here this would be g4W3L7/eFsUjV0eMncBkbg== (if you followed the steps above - the ServiceNow Events user encrypted password).\nTest your integration connection by clicking Test connection.\n(Optional) You can improve search performance by mapping the fields from your implementation fields to IBM Cloud Pak for Watson AIOps\u0026rsquo;s standard fields. Enter the values that you want to map, then click Format to ensure that you entered a valid JSON configuration.\nClick the Data flow toggle to turn on data collection\nSelect Historical data for initial AI training: A single set of training data used to define your AI model. You must also specify the parallelism of your source data. Historical data is harvested from existing logs in your integration over a specified time period in the past.\nSet the start date to 01/01/2019\nSet the end date to the current date\nSelect whether you want to collect inventory and topology data from your ServiceNow instance. Click the Collect inventory and topology data toggle to turn on inventory and data collection.\nTo schedule ServiceNow observer jobs, enter the following information:\nStart date: The start date of when the job is to run. Time: The time to run the observer job. Time interval (period): How frequently to run the job (either by hour, or by minute). Interval: The duration of time between runs based on the Time interval (period). For example, if you wanted the job to run every 2 hours, in Time interval (period), select hours, and in Interval, enter 2. Enter 0 to run the observer job one time (and manually through the interface otherwise). Click Integrate.\n"},{"id":60,"href":"/cp4waiops-training/configure-servicenow/configure_snow_05/","title":"Testing Integration","parent":"Configure ServiceNow (optional)","content":" Testing the ServiceNow Integration Step: Creating stories as incidents in ServiceNow After the integration is finished, for every chatbot story created, an incident will be created in ServiceNow. For example, the creation of the following story number 9 in Slack:\nThis story has a corresponding incident created in ServiceNow. To access these incidents, from the ServiceNow home page search for agent, and click on Agent Workspace Home, as shown below\nIn the Agent Workspace, if you click on the burger menu and select Watson AIOps Incidents, you will see the list of incidents created by Watson AIOps as shown below\nThis is the incident in ServiceNow that corresponds to the story number 9 that was mentioned before\nStep: Historical similar incidents When an incident occurs, it can be helpful to review details for similar incidents to help determine a resolution. This AI model aggregates information about similar messages, anomalies, and events for a component or application. It can also extract the steps used to fix previous incidents, if documented. Training this AI model will help you discover historical incidents to aid in the remediation of current problems.\nImportant: Incidents in ServiceNow must contain meaningful entries in the Resolution notes (close_notes value in the logs) field to successfully populate the Search recommended actions feature in your ChatOps interface. If your incidents do not include resolutions, or include default entires like Closed by Caller, these values do not identify paths to remediation. As a result, empty or non-meaningful entries yield no results in your ChatOps interface because they provide no potential actions.\nThe process can be defined in the following steps:\nChange at least five existing incidents in your ServiceNow developer instance in order to match the stories you already have in Slack. To see the existing sample incidents in your ServiceNow developer instance search for incidents and select Service Desk -\u0026gt; Incidents as shown below Select an existing open incident and update the description and short description with some known log anomaly error from an existing story. For example the next picture shows the description as \u0026ldquo;Unknown Error web\u0026rdquo;. Then click on the Resolution Information tab and Close the incident with resolution code Solved and fill the Resolution Notes with some resolution such as \u0026ldquo;web service was restarted\u0026rdquo;. Repeat this process for at least five tickets.\nNow we can load the historical incidents data. We will verify that there is no incident data loaded yet by running the following command \u0026lt;\u0026lt;\u0026lt;login into the cluster\u0026gt;\u0026gt;\u0026gt; oc exec -it `oc get pods|grep ai-platform-api-server|awk \u0026#39;{print $1;}\u0026#39;` bash Now run the following CURL command\ncurl --insecure -u $ES_USERNAME:$ES_PASSWORD -X GET https://$ES_ENDPOINT/_cat/indices -k|sort|grep -e incident -e snow yellow open snowchangerequest tyEtirBzSh6sAgN6mVc51g 1 1 0 0 208b 208b yellow open snowincident bEX48U3rT4GzpM0zt6Mgaw 1 1 0 0 208b 208b As you can see there is no data yet.\nWe will enable the incident data flow now.\nFrom the Home page click on Data and tool integrations.\nClick on the ServiceNow integration and select Edit.\nFrom the integration form, we will pull data by selecting \u0026ldquo;Data Flow\u0026rdquo; ON,\nCheck \u0026ldquo;Historical data for initial AI training\u0026rdquo; and\nSelect a start/end date to cover the existing sample incidents in the ServiceNow developer instance. In my instance this range was from 08/08/2015 until 05/13/2021. 1. Select 2 for \u0026ldquo;Source parallelism\u0026rdquo;. Keep topology Data off.\nClick on the Save button at the bottom of the page.\nNow incident data is being loaded into WAIOPS. Wait for an hour.\nNote: this is a limitation of the vV3.1.1product in the sense that there is no feedback in the UI regarding how the data is being loaded or what data has been loaded already.\nAfter an hour wait, we will verify that now there is indeed incident data loaded by running the same command:\n\u0026lt;\u0026lt;\u0026lt;login into the cluster\u0026gt;\u0026gt;\u0026gt; oc exec -it `oc get pods|grep ai-platform-api-server|awk \u0026#39;{print $1;}\u0026#39;` bash Now run the following CURL command\ncurl --insecure -u $ES_USERNAME:$ES_PASSWORD -X GET https://$ES_ENDPOINT/_cat/indices -k|sort|grep -e incident -e snow yellow open snowchangerequest tyEtirBzSh6sAgN6mVc51g 1 1 164 0 169.3kb 169.3kb yellow open snowproblem xBjP5lvrRYWOlidFd0X_Xw 1 1 2 0 123.2kb 123.2kb yellow open snowincident bEX48U3rT4GzpM0zt6Mgaw 1 1 138 0 280.8kb 280.8kb As you can see there is incident data now loaded in elastic search. Now we need to disable the data flow. Click on the ServiceNow integration and select the 3dot menu on the far right and select \u0026ldquo;Disable Ticket Data Flow\u0026rdquo;.\nNow its time to use that data for historical similar incident training. Click AI Model Management from the Home page and select the Similar Incidents card as shown below. Create a training definition by clicking on the Create Training Definition button. Select \u0026ldquo;manually\u0026rdquo; for the schedule option and click save. The next picture shows a training definition (not that in this case it has already been used for training)\nNow its time to run the training. From the top right Actions menu select Start Training. After some time, you will the training results and the confirmation that the model has been deployed as shown in the next picture:\nNow, lets take a look at elastic search again and see if the new model is there. Run the following commands:\n\u0026lt;\u0026lt;\u0026lt;login into the cluster\u0026gt;\u0026gt;\u0026gt; oc exec -it `oc get pods|grep ai-platform-api-server|awk \u0026#39;{print $1;}\u0026#39;` bash Now run the following CURL command\ncurl --insecure -u $ES_USERNAME:$ES_PASSWORD -X GET https://$ES_ENDPOINT/_cat/indices -k|sort|grep -e incident -e snow yellow open 1000-1000-incident_models_latest DEFV7jFXQcO9j16w9wg3Wg 1 1 1 0 4kb 4kb yellow open incident-train-last-timestamp qZBKSzkyR528ou48vR3O3g 1 1 1 0 3.5kb 3.5kb yellow open incidenttrain _mI7aKfSSgi9EFPfPln-eQ 1 1 88 0 141.1kb 141.1kb yellow open normalized-incidents-1000-1000 dknPqXemSjyfYbTXPeJ91Q 1 1 44 0 82.9kb 82.9kb yellow open snowchangerequest tyEtirBzSh6sAgN6mVc51g 1 1 246 0 271kb 271kb yellow open snowincident bEX48U3rT4GzpM0zt6Mgaw 1 1 207 0 456.7kb 456.7kb yellow open snowproblem xBjP5lvrRYWOlidFd0X_Xw 1 1 3 0 241.2kb 241.2kb As you can see, there is a new model created for incidents.\nFinally, lets use the new model by running the Search Similar Incidents functionality from an existing story in Slack. Select a story that has a reference to the updated incident you did previously and click on Search Similar Incident button As we can see in the previous picture, when we click search, a historical incident is found and a summary of the ticket resolution activities are shown. You can click on the text in blue to go to the actual ticket in your ServiceNow developer instance.\nStep: Pulling inventory and topology data from ServiceNow Using the WAIOPS ServiceNow Observer job, you can retrieve the Configuration Management Database (CMDB) data from ServiceNow. The ServiceNow developer instance comes loaded with sample topology and inventory data. In this section, we will define an observer job to pull this information into WAIOPS, that can be later be seen from the Topology Viewer.\nServiceNow CMDB The ServiceNow Configuration Management data base creates and maintains the logical configurations the network infrastructure needs to support a ServiceNow service. These logical service configurations are mapped to the physical layout data of the supporting network and application infrastructure in each of the respective domains. They track the physical and logical state of IT service elements and associate incidents to the state of service elements, which helps in analyzing trends and reducing problems and incidents. The configurations are stored in a configuration management database which consists of entities, called Configuration Items (CI), that are part of your environment. A CI may be:\nA physical entity, such as a computer or router A logical entity, such as an instance of a database Conceptual, such as a Requisition Service A CI does not exist on its own. CIs have dependencies and relationship with other CIs. For example, the loss of disk drives may take a database instance down, which affects the requisition service that the HR department uses to order equipment for new employees.\nIn order to see existing CMDB data in ServiceNow, from the developer instance home page, from the top left you can search for CI, click on CI Class Manager and click the \u0026lsquo;Hierarchy\u0026rsquo; button at the upper left of this page to start the CI Class Manager.\nFor example, on the CI Classes column, click on Hardware, select the CI List to see the actual items and search for SAP. You will find a number of SAP servers own by the Lenovo Organization as shown below. We will see these same SAP servers later in the Topology Viewer in WAIOPS.\nServiceNow Observer Job In CP4WAIOPS there are two ways to enable a ServiceNow observer job: the first way is inside the ServiceNow main integration form and the second way is as a regular observer job. In this cookbook, we will follow the second option.\nFrom the WAIOPS home page, click on Data and tool integrations, then click on the Advanced tab and finally select Manage observer jobs. You will see the list of available observers after you click on the Add a new job card as shown below (note that the number of observer cards will vary depending on what observers are enabled in your WAIOPS instance)\nClick on the ServiceNow card and complete the observer job form as shown below:\nUnique ID: Be sure to give your job a unique name so you can recognize it in the future. ServiceNow instance: Specify the URL of the ServiceNow developer instance. ServiceNow username: Specify the same ServiceNow events user username you configured before under the Creating ServiceNow integrations section. ServiceNow password: Specify the same encrypted password you configured before under the Creating ServiceNow integrations section. Leave the optional Additional parameters section unchanged. Click on the Job schedule section and confirm that Run time is set to now and Time interval as once only\nThe following screenshot shows the complete form:\nFinally click on Save to save the observer job configuration and run the job. This job will pull all the existing topology and inventory data from your ServiceNow developer instance into WAIOPS.\nServiceNow Observer Job logs After you let the job run, lets check the logs of the observer pod by running the following command:\noc logs `oc get pods|grep servicenow-observer|awk \u0026#39;{print $1;}\u0026#39;` \u0026gt; servicenow-observer-logs.txt Open the log output file servicenow-observer-logs.txt and verify that you see log lines like those shown below:\nINFO [2021-05-21 19:08:45,222] [dw-28 - POST /1.0/servicenow-observer/jobs/load] c.i.i.t.o.a.JobPostApi - dw-28 - POST /1.0/servicenow-observer/jobs/load - submitJobRequest - Accepted job id: DcXec2deRKyC4GbcHmygew, name: ServiceNow Observer Job 1, for scheduling. INFO [2021-05-21 19:08:45,298] [pool-12-thread-1] c.i.i.t.k.c.a.ConsumerWorker - Consumer topic [itsm.nodes.json] Read 2 records from Kafka INFO [2021-05-21 19:08:45,301] [pool-12-thread-1] c.i.i.t.o.p.ResourceUploadPluginManager - Change of {\u0026#34;keyIndexName\u0026#34;:\u0026#34;servicenow-observer-provider\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;servicenow-observer-provider\u0026#34;,\u0026#34;entityTypes\u0026#34;:[\u0026#34;provider\u0026#34;],\u0026#34;vertexType\u0026#34;:\u0026#34;mgmtArtifact\u0026#34;,\u0026#34;_id\u0026#34;:\u0026#34;VD6JvpGcMrUUbsKfYyucXQ\u0026#34;} ... INFO [2021-05-21 19:08:51,808] [Fetch:cmn_department] c.i.i.t.o.s.a.r.ServiceNowRestApi - Fetched records 1 to 7 of /api/now/table/cmn_department from a total 7 records INFO [2021-05-21 19:08:52,057] [Fetch:cmn_department] c.i.i.t.o.s.a.r.ServiceNowRestApi - Process all 7 records for /api/now/table/cmn_department ... INFO [2021-05-21 19:08:59,722] [Fetch:cmdb_ci] c.i.i.t.o.s.a.r.ServiceNowRestApi - Fetched records 1 to 2784 of /api/now/table/cmdb_ci from a total 2784 records ... INFO [2021-05-21 19:09:23,087] [pool-12-thread-1] c.i.i.t.o.p.ResourceUploadPluginManager - Change of {\u0026#34;keyIndexName\u0026#34;:\u0026#34;servicenow-observer:ServiceNow Observer Job 1\u0026#34;,\u0026#34;name\u0026#34;:\u0026#34;ServiceNow Observer Job 1\u0026#34;,\u0026#34;entityTypes\u0026#34;:[\u0026#34;ASM_OBSERVER_JOB\u0026#34;],\u0026#34;vertexType\u0026#34;:\u0026#34;mgmtArtifact\u0026#34;,\u0026#34;tags\u0026#34;:[\u0026#34;OBSERVATION_JOB\u0026#34;,\u0026#34;servicenow-observer\u0026#34;],\u0026#34;_id\u0026#34;:\u0026#34;DcXec2deRKyC4GbcHmygew\u0026#34;,\u0026#34;_changeMap\u0026#34;:{}} Verify Data in Topology Viewer Finally, lets verify the ServiceNow inventory and topology data in the Topology Viewer. From the WAIOPS home page click on Topology viewer and search for Lenovo and click on the search result blue target. You will see that the topology for the ServiceNow Organization Lenovo is shown. If you zoom-in, you will see that this topology includes the SAP servers (SAP-SD-01, SAP-SD-02, etc) we saw before in ServiceNow.\nStep: Encrypting the Service Now Password Important: You must specify an IBM Cloud Pak for Watson AIOps encrypted version of your ServiceNow password to collect inventory and topology data from ServiceNow. To encrypt your ServiceNow password, complete the following steps:\nMake sure that you have oc installed on your local system. For more information about these requirements, see Preparing to install IBM Cloud Pak for Watson AIOps. Log in to your Red Hat OpenShift Container Platform cluster by using the oc login command. You can identify your specific oc login by clicking the user name dropdown menu in the Red Hat OpenShift Container Platform console, then clicking Copy Login Command.\nSwitch your project to where the Cloud Pak for Watson AIOps is installed (e.g. cp4waiops) using the following command (use your own project name):\noc project cp4waiops Identify the full name for the evtmanager-topology-topology pod: oc get pods | grep evtmanager-topology-topology Enter the following command to encrypt your password. The content of \u0026lt;your_password\u0026gt; is your unencrypted ServiceNow password. oc exec -ti evtmanager-topology-topology-\u0026lt;xxxxxxxxx-xxxxx\u0026gt; -- java -jar /opt/ibm/topology-service/topology-service.jar encrypt_password -p \u0026#39;\u0026lt;your_password\u0026gt;\u0026#39; Copy and paste the results of the preceding command (your encrypted ServiceNow password) in this field. "},{"id":61,"href":"/cp4waiops-training/configure-servicenow/configure_snow_06/","title":"Custom Data","parent":"Configure ServiceNow (optional)","content":" ServiceNow Custom Data Step: User 2 - abel.tuter Import the Changes from ./doc/servicenow/import_change.xlsx\nSelect Change - All from the right-hand menu Right Click on Numberin the header column Select Import Chose the ./doc/servicenow/import_change.xlsx file and click Upload Click on Preview Imported Data Click on Complete Import (if there are errors or warnings just ignore them and import anyway) Import the Incidents from ./doc/servicenow/import_incidents.xlsx\nSelect Incidents - All from the right-hand menu Proceed as for the Changes but for Incidents "},{"id":62,"href":"/cp4waiops-training/troubleshooting/","title":"Troubleshooting","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":" Troubleshooting "},{"id":63,"href":"/cp4waiops-training/troubleshooting/troubleshooting_00/","title":"General Troubleshooting","parent":"Troubleshooting","content":" General Troubleshooting Official Troubleshooting Documentation The official IBM Troubleshooting Documentation is probably a safe place to start.\nCheck your installation Run the following tool:\n./tools/11_check_install.sh This might give you some pointers as to why your instance is misbehaving.\n"},{"id":64,"href":"/cp4waiops-training/troubleshooting/troubleshooting_01/","title":"Installation Problems","parent":"Troubleshooting","content":" Installation Problems Topology Pods in Crashloop If the aiops-topology-xxx Pods are crashlooping, apply the following patches. I have only seen this happen on ROKS.\noc patch deployment aiops-topology-merge -n cp4waiops --patch-file \u0026#34;./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-merge-patch.yaml\u0026#34; oc patch deployment aiops-topology-search -n cp4waiops --patch-file \u0026#34;./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-search-patch.yaml\u0026#34; oc patch deployment aiops-topology-status -n cp4waiops --patch-file \u0026#34;./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-status-patch.yaml\u0026#34; oc patch deployment aiops-topology-layout -n cp4waiops --patch-file \u0026#34;./ansible/roles/cp4waiops-ai-manager//templates/waiops/patches/aiops-topology-layout-patch.yaml\u0026#34; Pods with Pull Error If Pods are having pull errors, apply the following patches.\nkubectl patch -n cp4waiops serviceaccount aiops-topology-service-account -p \u0026#39;{\u0026#34;imagePullSecrets\u0026#34;: [{\u0026#34;name\u0026#34;: \u0026#34;ibm-entitlement-key\u0026#34;}]}\u0026#39; kubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-spark-worker -p \u0026#39;{\u0026#34;imagePullSecrets\u0026#34;: [{\u0026#34;name\u0026#34;: \u0026#34;ibm-entitlement-key\u0026#34;}]}\u0026#39; kubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-spark-pipeline-composer -p \u0026#39;{\u0026#34;imagePullSecrets\u0026#34;: [{\u0026#34;name\u0026#34;: \u0026#34;ibm-entitlement-key\u0026#34;}]}\u0026#39; kubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-spark-master -p \u0026#39;{\u0026#34;imagePullSecrets\u0026#34;: [{\u0026#34;name\u0026#34;: \u0026#34;ibm-entitlement-key\u0026#34;}]}\u0026#39; kubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-probablecause -p \u0026#39;{\u0026#34;imagePullSecrets\u0026#34;: [{\u0026#34;name\u0026#34;: \u0026#34;ibm-entitlement-key\u0026#34;}]}\u0026#39; kubectl patch -n cp4waiops serviceaccount aiops-ir-analytics-classifier -p \u0026#39;{\u0026#34;imagePullSecrets\u0026#34;: [{\u0026#34;name\u0026#34;: \u0026#34;ibm-entitlement-key\u0026#34;}]}\u0026#39; kubectl patch -n cp4waiops serviceaccount aiops-ir-lifecycle-eventprocessor-ep -p \u0026#39;{\u0026#34;imagePullSecrets\u0026#34;: [{\u0026#34;name\u0026#34;: \u0026#34;ibm-entitlement-key\u0026#34;}]}\u0026#39; oc delete pod $(oc get po -n cp4waiops|grep ImagePull|awk \u0026#39;{print$1}\u0026#39;) -n cp4waiops "},{"id":65,"href":"/cp4waiops-training/troubleshooting/troubleshooting_02/","title":"Integration Problems","parent":"Troubleshooting","content":" Integration Problems Slack integration not working See here Check if data is flowing Check Log injection with Browser Go to DemoUI\nSelect tab System\nSelect Flink Connectors\nClick on ELKInception3\nYou should see values go up under Records Sent when launching incident creation\nCheck Log injection with CommandLine To check if logs are being injected through the demo script:\nLaunch\n./tools/22_monitor_kafka.sh Select option 5\nYou should see data coming in.\nCheck Events injection with CommandLine To check if events are being injected through the demo script:\nLaunch\n./tools/22_monitor_kafka.sh Select option 4\nYou should see data coming in.\nCheck Alerts and/or Stories being generated with CommandLine To check if stories are being generated:\nLaunch\n./tools/22_monitor_kafka.sh Select option 2 or 3\nYou should see data being generated.\nMonitor ElasticSearch Indexes with Browser Run ./tools/28_access_elastic.sh in a separate terminal window.\nThis allows you to access ElasticSearch and gives you:\nES User\nES Password\nMonitor ElasticSearch Indexes from Firefox I use the Elasticvue Firefox plugin.\nFollow these steps to connects from Elasticvue:\nSelect Add Cluster\nPut in the credentials and make sure you put https and not http in the URL\nClick Test Connection - you will get an error\nClick on the https://localhost:9200 URL\nThis will open a new Tab, select Accept Risk and Continue\nCancel the login screen and go back to the previous tab\nClick Connect\nYou should now be connected to your AI Manager ElasticSearch instance\nCheck ElasticSearch Indexes with CommandLine Run\n./tools/28_access_elastic.sh in a separate terminal window.\nThis allows you to access ElasticSearch.\nLaunch\n./tools/23_monitor_es.sh Select option 5\nYou should see data coming in.\n"},{"id":66,"href":"/cp4waiops-training/","title":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","parent":"","content":"\nIn this Training you will learn how to manually install IBM CloudPak for AIOps and how to configure some basic functionalities.\nThe idea is to provide you with an optimised way to learn how to do a basic setup of CP4WAIOPS.\nYou will learn about the following topics:\nInstalling AIManager from scratch Integrate AIManager with OpenLDAP for user management Integrate AIManager with ELK for Log Anomalies Define and train AI Models for Log Anomaly Detectiom Metric Anomaly Detection Event Grouping Similar Incidents Change Risk Create Policies for Story creation and Runbook assignment Integrate AIManager with Ansible Tower and create Runbooks in AIManager Create a RobotShop Application Topology Integrate AIManager with Slack (optional) Integrate AIManager with Service Now (optional) üöÄ Let's Start ¬ª In the end you will have a fully functioning demo environment. "},{"id":67,"href":"/cp4waiops-training/categories/","title":"Categories","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":""},{"id":68,"href":"/cp4waiops-training/tags/","title":"Tags","parent":"Welcome to the IBM CloudPak for Watson AIOps Installation Training","content":""}]